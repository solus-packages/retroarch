name       : retroarch
version    : 1.7.4
release    : 27
source     :
    - https://github.com/libretro/RetroArch/releases/download/v1.7.4/RetroArch-1.7.4.tar.xz : 0842250358949856f3946febf70ed6fac289c7dcb471c531e2efbdc8c2696b61
license    : GPL-3.0-or-later
component  : games.emulator
summary    : RetroArch is the official reference frontend for the libretro API
description: |
    RetroArch is the reference frontend for the libretro API. Popular examples of implementations for this API includes videogame system emulators and game engines, but also more generalized 3D programs.
builddeps  :
    - pkgconfig(alsa)
    - pkgconfig(freetype2)
    - pkgconfig(gl)
    - pkgconfig(glu)
    - pkgconfig(libavcodec)
    - pkgconfig(libpng)
    - pkgconfig(libpulse)
    - pkgconfig(libusb-1.0)
    - pkgconfig(libv4l2)
    - pkgconfig(openal)
    - pkgconfig(sdl2)
    - pkgconfig(vulkan)
    - pkgconfig(x11)
    - pkgconfig(xi)
    - pkgconfig(xinerama)
    - pkgconfig(xv)
setup      : |
    ./configure --prefix=/usr \
        --enable-al \
        --enable-alsa \
        --enable-dbus \
        --enable-ffmpeg \
        --enable-freetype \
        --enable-libusb \
        --enable-materialui \
        --enable-networking \
        --enable-opengl \
        --enable-pulse \
        --enable-sse \
        --enable-sdl2 \
        --enable-threads \
        --enable-v4l2 \
        --enable-vulkan \
        --enable-wayland \
        --enable-x11 \
        --enable-zlib
build      : |
    %make
    %make -C gfx/video_filters
    %make -C libretro-common/audio/dsp_filters
install    : |
    %make_install

    install -D -m00644 libretro-common/audio/dsp_filters/*.{dsp,so} -t $installdir/%libdir%/retroarch/filters/audio/
    install -D -m00644 gfx/video_filters/*.{filt,so} -t $installdir/%libdir%/retroarch/filters/video/
